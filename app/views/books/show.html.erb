<div class="container">
	<div class="row">
		<div class="col-md-3">
			<div>
				<h1>User info</h1>
				<%= attachment_image_tag @book.user, :profile_image, size: "70x70", fallback: "images.png" %>
				<p><%= @book.user.name %></p>
				<p><%= @book.user.introduction %></p>
				<% if @book.user.id == current_user.id %>
				<p>
				<%= link_to "edit", edit_user_path(current_user.id) %>
				</p>
				<% end %>
			</div>

			<div>
				<h1>New book</h1>
				<% if @booknew.errors.any? %>
				    <%= @booknew.errors.count %>件のエラーが発生しました
				    <% @booknew.errors.full_messages.each do |message| %>
				        <%= message %>
				    <% end %>
				<% end %>

				<%= form_for(@booknew) do |f| %>
					<%= f.label :title, "Title" %><br>
				    <%= f.text_field :title, placeholder:"Title" %><br>
				    <%= f.label :body, "Opinion" %><br>
				    <%= f.text_area :body, placeholder:"Body" %>
				    <%= f.submit %>
				<% end %>
			</div>
		</div>

		<div class="col-md-9">
			<h1>Book detail</h1>
			<table>
				<tr>
					<td>
						<%= link_to user_path(current_user.id) do %>
							<%= attachment_image_tag @book.user, :profile_image, size: "30x30", fallback: "images.png" %><br>
							<%= @book.user.name %>
							<!--<%= link_to "#{@book.user.name}", user_path(params[:id]) %>は画像のリンクとくっつけて同じにした-->
						<% end %>

					</td>
					<td>
						<%= link_to "#{@book.title}", book_path(@book.id) %>
					</td>
					<td>
						<%= @book.body %>
					</td>

					<td>
						<% if @book.user == current_user %>
							<%= link_to "Edit", edit_book_path(@book.id) %>
							<%= link_to "Destroy", book_path(@book.id), method: :delete %>
						<% end %>
					</td>
				</tr>
				<!--最初はeachメソッドを使っていたが、findメソッドは一つを持ってくるのでeachメソッドは使えなかった。ただのインスタンス変数を入れるだけでいい-->
			</table>
		</div>
	</div>
</div>